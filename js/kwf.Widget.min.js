/*!
 * KWF Widget Script: kwf.Widget.js
 * Based on DOMcraft
 * 
 * @author Christoffer Lindahl <christoffer@kekos.se>
 * @date 2013-05-07
 * @version 1.0
 */
Kwf.Widget=(function(a){var c={},d={element:null,construct:function(){},destruct:function(){},isValid:function(){var f=a(this.controller_name),g=this.element,h=0;if(f){h=1;this.element=f;if(g){if(f.elem!==g.elem){this.destruct();this.construct()}}else{this.construct()}}else{if(g){this.destruct();this.element=null}}return h}};function e(j){var g=0,f,h;if(j.target.content_type==="application/json"){h=j.target.page.content||j.target.page;if(h.controller){if(c[h.controller]){c[h.controller][h.action](h);g=1}else{throw new Error("Widget onResponse(): could not find controller: "+h.controller)}}}if(!g){for(f in c){c[f].isValid()}}}a.ready(function(){a.ContentContext.addEvent("ready",e);a.BoxingContext.addEvent("ready",e)});function b(h,g){g.prototype=d;g.prototype.controller_name=h;var f=new g();c[h]=f;return f}return{register:b}}(Kwf));