function elem(b){try{return document.getElementById(b)||document.all[b]}catch(a){return false}}function addEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,0)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}function addSubmitEvent(b,a){addEvent(b,"click",function(c){window.submit_target=getTarget(c)});addEvent(b,"submit",a)}function isWs(a){return !(/[^\t\n\r ]/.test(a.data))}function is_ignorable(a){return(a.nodeType==8)||((a.nodeType==3)&&isWs(a))}function previousNode(a){while(a=a.previousSibling){if(!is_ignorable(a)){return a}}return null}function nextNode(a){while(a=a.nextSibling){if(!is_ignorable(a)){return a}}return null}function giveOpacity(b,a){if(typeof b.filters=="object"){b.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")"}}function getTarget(a){a=a||window.event;return a.target||a.srcElement}function returnFalse(a){(window.event)?event.returnValue=false:a.preventDefault()}function parseJSON(j){try{j=JSON.parse(j)}catch(e){try{j=eval("("+j+")")}catch(e){}}return j}function var_dump(b,f){function a(g){var h,j="";for(h=0;h<(g*2);h++){j+=" "}return j}var d=typeof b,e="",c;if(!f){f=1}else{if(f>5){return""}}if(d=="object"){e+="{\n";for(c in b){e+=a(f)+c+": "+var_dump(b[c],f+1)}e+=a(f)+"}"}else{e=b.toString()}e="("+d+") "+e+"\n";if(f==1){alert(e)}else{return e}}function toDOMnode(a){var b=document.createElement("div");b.innerHTML=a;return b.firstChild}var ajax={onbeforeajax:null,onafterajax:null,get:function(b,d,a,c){c=(typeof c=="object"?"?"+ajax.array2query(c):"");return ajax.send(b+c,"GET",d,a,null)},post:function(b,e,a,d,c){d=(d.nodeType?ajax.form2query(d,c):ajax.array2query(d));return ajax.send(b,"POST",e,a,d)},upload:function(g,i,h,p,e){if(typeof File!="undefined"){var r=p.files,s,q,n,b,o="---------------------------"+new Date().getTime(),u="--"+o+"\r\n";if(typeof FileReader=="undefined"){s=r[0];n=(s.fileName!=null)?s.fileName:s.name;return ajax.send(g,"POST",i,h,s,[["X-ajax-upload",encodeURIComponent(n)]])}else{b=new FileReader();b.onloadend=function(){u+='Content-Disposition: form-data; name="'+p.name+'"; filename="'+n+'"\r\nContent-Type: '+s.type+"\r\n\r\n"+b.result+"\r\n--"+o;if(q==r.length){u+="\r"+ajax.form2query(p.form,e,o);if(q){return ajax.send(g,"POST",i,h,u+"--",[["Content-Type","multipart/form-data; boundary="+o],["Content-Length",u.length]],1)}}};for(q=0;q<r.length;q++){s=r[q];n=(s.fileName!=null)?s.fileName:s.name;if(q){u+="\r\n"}b.readAsBinaryString(s)}}}else{var j=p.parentNode,d,l,c,t=ajax,k=document.body,m;if(t.onbeforeajax!=null){t.onbeforeajax()}d=k.appendChild(toDOMnode('<form style="visibility: hidden;" action="'+g+'" method="post" enctype="multipart/form-data" target="ajax_upload_frame"><input type="hidden" name="X-ajax-request" value="true" /><input type="hidden" name="X-frame-upload" value="true" /></form>'));j.removeChild(p);d.appendChild(p);l=k.appendChild(toDOMnode('<iframe style="visibility: hidden;" src="javascript: false;" name="ajax_upload_frame" id="ajax_upload_frame"></iframe>'));addEvent(l,"load",function(){setTimeout(function(){c=(l.contentDocument)?l.contentDocument:l.contentWindow.document;m=c.body.innerHTML;i({response:parseJSON(m),content_type:(m.substring(0,1)=="{"&&m.substring(m.length-1)=="}"?"application/json":"text/plain"),status:"200"});k.removeChild(l);if(t.onafterajax!=null){t.onafterajax()}},1)});d.submit();k.removeChild(d);j.appendChild(p)}},send:function(c,b,n,f,i,d,m){var e=(window.ActiveXObject)?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest(),g,k=0,j,l=ajax;e.open(b,c);e.setRequestHeader("X-ajax-request","true");if(typeof d=="object"){for(j in d){if(d[j][0]=="Content-Type"){k=1}e.setRequestHeader(d[j][0],d[j][1])}}if(!k){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")}e.onreadystatechange=function(){if(e.readyState==4){k=e.getResponseHeader("Content-Type");k=k.substring(0,k.indexOf(";"));g={response:e.responseText,content_type:k,status:e.status};if(g.content_type=="application/json"){g.response=parseJSON(g.response)}if(l.onafterajax!=null){l.onafterajax()}if(e.status==200){if(e.getResponseHeader("X-ajax-error")){g.success=0;f(g)}else{g.success=1;n(g)}}else{if(e.status==404){g={success:0,response:{error:["Filen hittades inte."]},content_type:"application/json",status:"404"};f(g)}}}};if(l.onbeforeajax!=null){l.onbeforeajax()}if(e.sendAsBinary&&m){e.sendAsBinary(i)}else{e.send(i)}return e},array2query:function(c){var b="",a;for(a in c){b+="&"+a+"="+encodeURIComponent(c[a])}return b.substring(1)},form2query:function(a,e,b){var d="",h;function g(i){if(b){h=(i.name==""?"":'\r\nContent-Disposition: form-data; name="'+i.name+'"\r\n\r\n'+encodeURIComponent(i.value)+"\r\n--"+b)}else{h=(i.name==""?"":"&"+i.name+"="+encodeURIComponent(i.value))}return h}if(a!=null){var f=a.getElementsByTagName("input"),j=a.getElementsByTagName("select"),k=a.getElementsByTagName("textarea"),c;for(c=0;c<f.length;c++){if(((f[c].type=="radio"||f[c].type=="checkbox")&&!f[c].checked)||(f[c].type=="button"||f[c].type=="submit")){continue}d+=g(f[c])}for(c=0;c<j.length;c++){d+=g(j[c])}for(c=0;c<k.length;c++){d+=g(k[c])}}if(e){d+=g(e)}return d.substring(1)}};var kwf={FULLPATH:"",onclick:null,onload:null,info_timer:null,clicking:function(b){if(b.button>1){return}var a=getTarget(b);if(a.className.indexOf("nolink")>-1||(a.parentNode.className&&a.parentNode.className.indexOf("nolink")>-1)){returnFalse(b)}if(a.className.indexOf("hide-boxing")>-1){boxing.hide()}if(kwf.onclick!=null){kwf.onclick(b,a)}},loading:function(a){if(elem("content")){content_request.findForms()}if(kwf.onload!=null){kwf.onload(a)}},hideInfo:function(){var a=elem("errorlist");if(a){a.parentNode.removeChild(a)}a=elem("infolist");if(a){a.parentNode.removeChild(a)}},infoHandler:function(e){var c="",f,d,a=0,b=kwf;clearTimeout(b.timer);if(e.errors){c+='<ul id="errorlist">';for(f in e.errors){c+="<li>"+e.errors[f]+"</li>"}c+="</ul>";a=1}if(e.info){c+='<ul id="infolist">';for(f in e.info){c+="<li>"+e.info[f]+"</li>"}c+="</ul>";a=1}d=elem("errorlist");if(d&&a){d.parentNode.removeChild(d)}d=elem("infolist");if(d&&a){d.parentNode.removeChild(d)}b.timer=setTimeout(b.hideInfo,10000);return c}};var content_request={onbefore_callback:null,onafter_callback:null,load:function(f,a,d,g){returnFalse(f);var b=getTarget(f),c=content_request;c.onbefore_callback=(d?d:null);c.onafter_callback=(g?g:null);if(c.onbefore_callback!=null){c.onbefore_callback(b)}ajax.get(a,c.response,c.response)},response:function(f,a){var d=content_request,e,c="",b=elem("content");if(a){d.onbefore_callback=null;d.onafter_callback=null}if(d.onafter_callback!=null){f=d.onafter_callback(f)}if(f.content_type=="application/json"){e=kwf.infoHandler(f.response);if(f.response.content){c=e+f.response.content}}else{c=f.response}if(c==""&&e!=""){b.insertBefore(toDOMnode(e),b.firstChild)}else{b.innerHTML=c;d.findForms()}},findForms:function(h){var f=content_request,d=elem("content"),a=d.getElementsByTagName("form"),c,g,e,b;for(c=0;c<a.length;c++){e=a[c];if(e.className.indexOf("ajax-form")<0){continue}g=(e.action=="")?document.location.href:e.action;addSubmitEvent(e,function(i){b=window.submit_target;returnFalse(i);if(window.submit_target.className.indexOf("hide-boxing")<0){b.style.display="none";if(f.onbefore_callback!=null){f.onbefore_callback(e)}ajax.post(g,f.response,f.response,e,window.submit_target)}})}}};var boxing_request={width:0,height:0,onbefore_callback:null,onafter_callback:null,load:function(h,b,d,a,g,i){returnFalse(h);var c=getTarget(h),f=boxing_request;f.width=d;f.height=a;f.onbefore_callback=(g?g:null);f.onafter_callback=(i?i:null);if(f.onbefore_callback!=null){f.onbefore_callback(c)}ajax.get(b,f.response,f.response)},response:function(e,a){var c=boxing_request,d,b="";if(a){c.onbefore_callback=null;c.onafter_callback=null}if(c.onafter_callback!=null){e=c.onafter_callback(e)}if(e.content_type=="application/json"){d=kwf.infoHandler(e.response);if(e.response.content){b=d+e.response.content}}else{b=e.response}if(b==""){if(d!=""){elem("content").insertBefore(toDOMnode(d),elem("content").firstChild)}boxing.hide()}else{boxing.show(b,c.width,c.height);c.findForms()}},findForms:function(g){var a=boxing.window.getElementsByTagName("form"),c,f,e,d=boxing_request,b;for(c=0;c<a.length;c++){e=a[c];if(e.className.indexOf("ajax-form")<0){continue}f=(e.action=="")?document.location.href:e.action;addSubmitEvent(e,function(h){b=window.submit_target;returnFalse(h);if(b.className.indexOf("hide-boxing")<0){b.style.display="none";if(d.onbefore_callback!=null){d.onbefore_callback(e)}ajax.post(f,d.response,d.response,e,b)}})}}};var boxing={initiated:0,state:0,html_tag:null,overlayer:null,close:null,window:null,onhide_callback:null,init:function(){var d=document,c=boxing,a=d.createElement("div"),b=d.createElement("div"),e=d.createElement("a");a.id="boxing-overlayer";c.overlayer=d.body.appendChild(a);addEvent(c.overlayer,"click",c.hide);addEvent(d,"keyup",c.keys);giveOpacity(a,60);e.id="close_boxing";e.className="hide-boxing";e.href="javascript: void(0);";e.appendChild(d.createTextNode("StÃ¤ng"));c.close=c.overlayer.appendChild(e);b.id="boxing-window";c.window=d.body.appendChild(b);c.html_tag=d.getElementsByTagName("HTML")[0];c.initiated=1},show:function(f,b,a){if(!boxing.initiated){boxing.init()}var c=boxing,d=c.window,e=c.close;w_unit=(b>100?"px":"%");h_unit=(a>100?"px":"%");c.overlayer.style.display="block";d.style.display="block";e.style.width=d.style.width=b+w_unit;d.style.height=a+h_unit;if(h_unit=="%"){d.style.margin="0 0 0 -"+(b/2)+w_unit;d.style.top=(100-a)/2+"%";e.style.margin="0 0 0 -"+(b/2)+w_unit;e.style.top=(100-a)/2-3+"%"}else{d.style.margin="-"+(a/2)+h_unit+" 0 0 -"+(b/2)+w_unit;d.style.top="50%";e.style.margin="-"+(a/2)-20+h_unit+" 0 0 -"+(b/2)+w_unit;d.style.top="50%";e.style.top="50%"}d.innerHTML=f;c.html_tag.style.overflow="hidden";c.state=1},hide:function(){if(!boxing.initiated){return}var a=boxing,b=a.window;if(a.onhide_callback!=null){if(!a.onhide_callback()){return}}a.overlayer.style.display="none";b.style.display="none";b.innerHTML="";a.html_tag.style.overflow="";a.onhide_callback=null;a.state=0},keys:function(a){if(a.keyCode==27){boxing.hide()}}};addEvent(document,"click",kwf.clicking);addEvent(window,"load",kwf.loading);